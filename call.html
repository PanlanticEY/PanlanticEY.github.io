<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Call</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <!-- Your custom styles, if any -->
  <!-- <link href="styles.css" rel="stylesheet"> -->
  <!-- google chart js library -->
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
</head>


<body>

  <!-- Your content goes here -->

  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Medi-Assist</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <!--
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Home</a>
          </li>
          -->
        </ul>
        <a href="prescription.html" class="btn btn-danger btn-block">
          <i class="bi bi-telephone-x-fill"></i> Drop Call
        </a>
      </div>
    </div>
  </nav>


    <div class="container-fluid">
        <div class="row">
          <div class="col-sm-4">   <!-- Chart Area starts -->
          <br>
          <div class="card">
            <div class="card-body">
              <h5>Disease Prediction</h5>
              <p class="card-text"><div id="pie_chart"></div></p>
            </div>
          </div>
          <br>
          
          </div> <!-- Chart Area ends -->

          <div class="col-sm-8">
            <br>
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Patient Profile Overview</h5>
                <p class="card-text"><b>Name :</b> Janki Singh &nbsp;&nbsp;<b> Gender :</b> Female &nbsp;&nbsp;<b> Age : </b> 35</p>
                <div class="overflow-auto" style="height: 185px;">
                  Janki Singh, a 35-year-old woman, manages asthma with inhaled corticosteroids and occasional bronchodilators, and previously experienced gestational diabetes, now resolved. Presently, she battles stress-induced headaches due to work and family responsibilities, managing sporadic acid reflux with dietary adjustments and antacids. Pending routine tests, Janki maintains her health with an active lifestyle, incorporating regular exercise and a balanced diet despite the stress of her demanding job and caregiving duties. Her family history includes diabetes and hypertension. Follow-ups are scheduled for asthma control, stress management, and overall health monitoring.
                </div>
              </div>
            </div>
            <br>
          </div>

          </div>
          <div class="row">


          <div class="col-sm-4">  <!-- Video call starts -->

                <video width="480" height="270" autoplay controls muted>
                  <source src="videocall.mp4" type="video/mp4">
                  Your browser does not support the video tag.
                </video>
            
          </div>  <!-- Video call ends -->

          <div class="col-sm-4" id="suggestWindow" style="overflow-y: scroll;height: 300px;">

            <b>Suggest Prompts</b> <br><br>

            <script>document.getElementById('suggestWindow').scrollTop = suggestWindow.scrollHeight;</script>
            
          </div>


          <div class="col-sm-4" id="transcriptWindow" style="overflow-y: scroll;height: 300px; background-color: beige;">
            <b>Transcript</b><br><br>

          </div>
          <script>document.getElementById('transcriptWindow').scrollTop = transcriptWindow.scrollHeight;</script>
        </div>
      </div>
  
  <script>
  
  //Chart Update Funtion

  function insertSuggest(message) {
  // Create the new div element
  var newDiv = document.createElement('div');
  newDiv.classList.add('alert', 'alert-warning', 'alert-dismissible', 'fade', 'show');
  newDiv.setAttribute('role', 'alert');

  // Create the inner content and button
  var content = document.createTextNode(message);
  var closeButton = document.createElement('button');
  closeButton.setAttribute('type', 'button');
  closeButton.classList.add('btn-close');
  closeButton.setAttribute('data-bs-dismiss', 'alert');
  closeButton.setAttribute('aria-label', 'Close');

  // Append content and button to the new div
  newDiv.appendChild(content);
  newDiv.appendChild(closeButton);

  // Append the new div to the parent div
  var parentDiv = document.getElementById('suggestWindow');
  parentDiv.appendChild(newDiv);

  document.getElementById('suggestWindow').scrollTop = suggestWindow.scrollHeight; // scroll down
}

function insertTranscript(message) {
  var divToInsert = document.createElement('div');
  divToInsert.innerHTML = message;

  var contentDiv = document.getElementById('transcriptWindow');
  contentDiv.appendChild(divToInsert);

  document.getElementById('transcriptWindow').scrollTop = transcriptWindow.scrollHeight; // scroll down
}

function updateChart(chartData) {
  google.charts.load('current', {'packages':['corechart']});
            google.charts.setOnLoadCallback(drawChart);

            function drawChart() {
              // Data for the pie chart
              var data = google.visualization.arrayToDataTable(chartData);
          
              // Options for the pie chart
              var options = {
              };
          
              // Instantiate and draw the chart, passing in options.
              var chart = new google.visualization.PieChart(document.getElementById('pie_chart'));
              chart.draw(data, options);
            }
}

  setTimeout(function() { insertTranscript("<p><strong>Doctor:</strong> Namaste! How are you feeling today?</p>"); }, 6000);
  setTimeout(function() { insertTranscript("<p><strong>Patient:</strong> Namaste, Doctor. I've not been well lately. I have a cough, and it feels like I can't breathe properly sometimes.</p>"); }, 15000);
  setTimeout(function() { insertTranscript("<p><strong>Doctor:</strong> I'm sorry to hear that. Let's try to understand your symptoms better. Can you tell me when the cough started and if you've noticed anything that triggers it?</p>"); },26000);
  setTimeout(function() { insertTranscript("<p><strong>Patient:</strong> The cough started a couple of weeks ago. It's worse at night, and I haven't really noticed any specific triggers.</p>"); }, 38000);
  setTimeout(function() { insertTranscript("<p><strong>Doctor:</strong> Thank you for sharing that. Have you experienced any other symptoms, like fever or chills?</p>"); }, 44000);
  setTimeout(function() { insertTranscript("<p><strong>Patient:</strong> Yes, Doctor. I had a fever for a few days, but it went away on its own.</p>"); }, 52000);
  setTimeout(function() { insertTranscript("<p><strong>Doctor:</strong> I see. Apart from the cough and fever, have you noticed any chest pain, wheezing, or any changes in your daily activities?</p>"); },61000);
  setTimeout(function() { insertTranscript("<p><strong>Patient:</strong> No chest pain, but sometimes it feels a bit tight in my chest. And I get tired more easily than usual.</p>"); }, 72000);
  setTimeout(function() { insertTranscript("<p><strong>Doctor:</strong> Got it. Your symptoms could suggest a respiratory infection. Now, about your living environment have there been any recent changes, like exposure to smoke, dust, or any new pets?</p>"); }, 86000);
  setTimeout(function() { insertTranscript("<p><strong>Patient:</strong> Well, Doctor, I live in a rural area, so there's a lot of dust, and we have some animals around, but nothing has changed recently.</p>"); }, 97000);
  setTimeout(function() { insertTranscript("<p><strong>Doctor:</strong> Understood. Considering your symptoms, it's possible you're dealing with a lower respiratory tract infection. However, to narrow it down,In the meantime, try to avoid any potential irritants,take proper rest, stay hydrated.</p>"); }, 116000);
  setTimeout(function() { insertTranscript("<p><strong>Doctor:</strong> I'll be sending you a prescription.</p>"); }, 118000);
  setTimeout(function() { insertTranscript("<p><strong>Patient:</strong> I'll take the prescription and let you know how I feel.</p>"); }, 125000);
  setTimeout(function() { insertTranscript("<p><strong>Doctor:</strong> Ok! thank you.</p>"); }, 127000);
  
  setTimeout(function() { insertSuggest("When did the cough start? Has it been persistent or intermittent ?"); }, 15000);
  setTimeout(function() { insertSuggest(" Have you had any respiratory issues or similar episodes in the past? Are you currently on any medication for any conditions ?"); }, 15000);
  setTimeout(function() { insertSuggest("Are you experiencing any other symptoms alongside the cough, such as fever, chest pain, wheezing, or fatigue ?"); }, 38000);
  setTimeout(function() { insertSuggest("Have you moved to a new place or encountered any changes in your surroundings that might be contributing to these symptoms?"); }, 52000);
  

  var chart1 =   
  [['Disease', 'Chance'],
  ["Asthma exacerbation", 50],
  ["Acid reflux (GERD)", 20],
  ["Tension headaches", 20],
  ["Gestational diabetes recurrence", 5],
  ["Hypertension", 5]];

  //updateChart([['Disease', 'Chance'],['Asthma',40],["GERD (Gastroesophageal Reflux Disease)",15],["Pneumonia - Chance",10],["Allergies/Allergic Reaction - Chance",5],["Other Respiratory Conditions (COPD, Pulmonary Embolism) - Chance",5]]);
  setTimeout(function(){updateChart(chart1);},1000);

  chart2 =
  [['Disease', 'Chance'],
  ['Asthma',40],
  ["GERD (Gastroesophageal Reflux Disease)",15],
  ["Pneumonia - Chance",10],
  ["Allergies/Allergic Reaction - Chance",5],
  ["Other Respiratory Conditions (COPD, Pulmonary Embolism) - Chance",5]];
  setTimeout(function(){updateChart(chart2);},15000);

  chart3 =
  [['Disease', 'Chance'],
  [ 'Asthma', 30],
  ['Chronic Obstructive Pulmonary Disease (COPD)',20],
  ["Allergic Reactions",15],
  ["Bronchitis",15],
  ["Pneumonia",10]
  ["GERD-Related Cough",10]];
  setTimeout(function(){updateChart(chart3);},38000);

  chart4 =
  [['Disease', 'Chance'],
  ["Asthma", 25],
  ["Bronchitis", 20],
  ["Pneumonia", 20],
  ["Respiratory Tract Infection", 15],
  ["GERD-Related Cough", 10],
  ["Allergies/Allergic Asthma", 10],
  ["COVID-19", 10]];
  setTimeout(function(){updateChart(chart4);},52000);

  chart5 =
  [['Disease', 'Chance'],
  ["Asthma", 25],
  ["Pneumonia", 15],
  ["Bronchitis", 15],
  ["Respiratory Tract Infection", 25],
  ["GERD-Related Cough", 10],
  ["Allergies/Allergic Asthma", 10]];
  setTimeout(function(){updateChart(chart5);},72000);

  chart6 =
  [['Disease', 'Chance'],
  ["Respiratory Tract Infection", 30],
  ["Asthma", 25],
  ["Bronchitis", 20],
  ["Allergies/Allergic Asthma", 15],
  ["Pneumonia", 10]];
  setTimeout(function(){updateChart(chart6);},97000);


  </script>

  <!-- Bootstrap Bundle with Popper.js -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
  <!-- Your custom scripts, if any -->

  <!-- <script src="scripts.js"></script> -->
</body>
</html>